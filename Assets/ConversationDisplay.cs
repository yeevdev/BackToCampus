using System.Collections;
using UnityEngine;
using UnityEngine.UI;

public class ConversationDisplay : MonoBehaviour
{
    public static ConversationDisplay Instance;
    public string[] convoScripts = {
        "오랜만이야! 진짜 보고 싶었어. 요즘 어떻게 지냈어? 만나서 직접 얘기하니까 더 반갑다 — 여기저기 바쁘다며? 네 근황을 차근차근 다 듣고 싶어. 일이나 공부 얘기부터 사소한 하루 일과까지, 심지어 별의별 소소한 고민이나 웃긴 에피소드까지 다 말해줘. 내가 질문하면 막 얘기 끊지 말고 천천히 풀어놔, 그러면 내가 하나하나 캐물을 수도 있고 같이 웃을 수도 있고 도와줄 수도 있으니까. 오늘 나온 김에 못다 한 얘기 다 털어놓자, 오래 못 본 만큼 하고 싶은 얘기가 쌓였을 테니까.",
        "와, 네 얼굴 보니까 마음이 놓인다. 일은 잘 되고 있어? 어? 근데 예전보다 피곤해 보이네, 혹시 최근에 안 좋은 일 생긴 거야? 그냥 표정이 달라 보여서 걱정되네. 무슨 일이면 편하게 얘기해봐 — 난 듣는 사람이니까 중간에 끊지 않고 끝까지 들어줄게. 어떻게 처리하면 좋을지 같이 생각해보고, 필요하면 실질적으로 도와줄 방법도 찾아볼게. 아무튼 괜찮은지 먼저 확인하고 싶었어, 네가 털어놓고 나면 훨씬 덜할 거야.",
        "여기까지 잘 왔네. 이따 같이 밥이나 한 끼 할래? 내가 쏠게. 시간 괜찮으면 근처 맛집 가서 천천히 먹으면서 오랜만에 얘기하자 — 메뉴 골라주는 건 내가 할게, 네가 좋아하는 스타일 말해줘. 데리고 갈 곳은 편하고 이야기도 하며 오래 앉아 있을 수 있는 데로 골라볼게. 식사하면서 못다 한 얘기하고, 요즘 관심 가는 거나 계획 같은 것도 나눠보자. 괜찮으면 디저트까지 코스처럼 이어가자고.",
        "옷 스타일 바뀌었네? 뭔가 더 멋져 보인다! 요즘 스타일링에 신경 쓴 것 같아, 어디서 산 건지 알려줘 — 다음에 같이 쇼핑 가도 좋고 새로운 코디 팁도 좀 알려줘. 평소에는 어떻게 고르는지, 좋아하는 색이나 브랜드가 있는지 궁금해. 옷 얘기하다 보면 서로 추천해주고 스타일 바꿔보는 것도 재밌을 것 같아. 근데 진짜 잘 어울려서 칭찬 안 할 수가 없네, 사진 한 장 찍어도 되려나?",
        "요즘은 뭐에 빠져 지내? 새로운 취미라도 생겼어? 취미 얘기하면 시간 가는 줄 모르잖아 — 나도 함께 해보고 싶으니 언제 한번 같이 해보자. 어떤 계기로 시작하게 됐는지, 얼마나 자주 하는지, 배워야 하는 게 있으면 내가 도와줄 수 있는지 궁금해. 취미로 만난 사람들 이야기나 재밌었던 순간들, 혹은 아직 못 꺼낸 계획 같은 것도 들려줘. 네가 추천하면 나도 관심 가져보고 같이 도전해볼게.",
        "이 동네도 많이 변했지? 너랑 다시 걷으니까 옛날 생각 난다. 그때 함께 놀던 장소들도 궁금한데, 다음에는 그 길로 같이 천천히 걸어볼래? 추억 얘기하면서 웃자. 예전에는 여기서 이런 일이 있었고, 그때 우리가 어떻게 웃다가 넘어졌는지 같은 이야기를 다시 꺼내도 좋고, 지금은 어떻게 변했는지도 구경하자. 길 따라가다 마주친 카페나 가게가 있으면 들어가서 옛날 이야기 계속하자. 날씨 좋은 날 천천히 걸으면 시간 가는 줄 모를 거야.",
        "날씨도 좋고, 이렇게 우연히 만나니 기분이 참 좋다. 연락 자주 못 해서 미안해. 바쁘다 보니 소홀했는데 앞으로는 더 자주 연락하고 얼굴 보자고, 오늘처럼 깜짝 만남도 좋네. 서로 일정 맞추기 어렵겠지만 작은 약속이라도 잡아두자고 제안하고 싶어. 가끔은 문자 몇 줄보다 얼굴 보고 얘기하는 게 더 큰 위안이 되니까. 앞으로 연락은 내가 먼저 할게, 네가 불편하면 말해줘.",
        "너 덕분에 오늘 하루가 더 좋아졌어. 다음에 또 보자! 시간 맞으면 주말에라도 만나서 영화나 산책하자, 미리 약속 잡아두면 더 편하게 만날 수 있을 것 같아. 같이 보고 싶은 영화가 있으면 목록 만들어서 하나씩 보는 것도 좋고, 주말 코스 정해두고 번갈아 가는 것도 괜찮을 것 같아. 약속 잡을 때는 네 일정 우선으로 할게, 편한 시간 알려줘. 그리고 좋은 카페나 장소 있으면 추천해줘, 내가 예약할게.",
        "힘든 일 있으면 언제든 말해. 친구잖아, 도와줄게. 말만 해도 되고 같이 해결책을 찾아줄게 — 공부나 일, 집안일 같은 거든지 필요하면 내가 도와줄게. 딱히 해결책이 안 보일 때는 그냥 옆에 있어주는 것도 좋으니까 그런 것도 부담 갖지 말고 말해. 네가 어떤 부분에서 부담을 느끼는지 구체적으로 말해주면 같이 계획 세워서 한 단계씩 해결해볼 수 있어. 혼자 끙끙 앓지 마, 같이 헤쳐나가자.",
        "다음엔 네가 좋아하는 카페에서 만나자. 약속해! 네가 즐겨 마시는 메뉴로 자리 잡아 줄게, 날짜 잡으면 내가 예약해둘게 — 편한 시간 알려줘. 요즘 핫한 카페나 조용한 구석진 카페 모두 괜찮으니까 네 취향대로 고르자. 너와 대화하면서 그냥 평범한 일상 얘기부터 좀 더 진지한 계획까지 편하게 나누고 싶어. 약속 정해지면 서로 기대할 수 있으니 한결 나을 거야."
    };

    public float timePerLetter = 0.05f;
    public int tooManyLetters = 140;
    private Text display;
    

    void Awake()
    {
        if (Instance == null)
        {
            Instance = this;
        }
        display = GetComponent<Text>();
    }

    public IEnumerator Conversation()
    {
        // 대화 랜덤 선택
        string selectedConvo = convoScripts[Random.Range(0, convoScripts.Length)];

        // 대화 한 글자씩 표시
        display.text = "";
        foreach (char letter in selectedConvo)
        {
            display.text += letter;
            yield return new WaitForSecondsRealtime(timePerLetter);
            if (display.text.Length >= tooManyLetters)
            {
                display.text = "";
                Debug.Log("게임 오버!");
                break;
            }
        }
        display.text = "";
    }
}